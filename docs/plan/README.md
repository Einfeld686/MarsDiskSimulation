docs/plan の運用ルール
======================

目的
----
- 開発・移行・検証などの「プラン」を一元管理する場所として `docs/plan/` を使う。
- AGENTS.md の方針に従い、ここでは手順とスコープを短く共有する（詳細な仕様は analysis/ に集約）。

ファイル命名規則
---------------
- `docs/plan/<YYYYMMDD>_plan_name.md` の形式で作成する（例: `docs/plan/20251207_deprecation_migration.md`）。
- 1 つのプランにつき 1 ファイルを基本とし、日付は作成日または開始日を用いる。

記載内容の推奨項目
---------------
- 目的と背景（なぜ行うか）
- 対象範囲・非対象範囲
- フェーズやマイルストーン、チェックリスト
- リスクと緩和策
- 実行後に確認すべきテスト・ドキュメント更新（DocSyncAgent / analysis-doc-tests など）

運用ルール
---------
- 新しい開発プランは必ず `docs/plan/` に追加し、他所に分散させない。
- 既存プランの進捗や変更は同じファイルに追記する（削除や上書きではなく履歴を残す）。
- 分岐した案がある場合は同日別名でファイルを分けるか、同ファイル内に明示的に節を分ける。
- 仕様の詳細や式の定義は `analysis/` 側に寄せ、ここでは方針・段取り・責務分担に留める。
- 各プランには必ず実装タスクのチェックボックスを設ける。対応が完了した場合は **必ず** チェックを入れて進捗を明示する（未完了のままにしない）。
- 出力参照は `out/<run_id>/...` か `analysis/outputs/...` を使い、曖昧な相対参照は避ける。
- 変更後は `python tools/plan_lint.py`（または `make plan-lint`）でパスの存在と絶対パス混入を検査する。
