# Mars Disk Simulation

> **ç«æ˜Ÿãƒ­ãƒƒã‚·ãƒ¥é™ç•Œå†…ãƒ€ã‚¹ãƒˆå††ç›¤ã®è¡çªãƒ»æ”¾å°„åœ§ãƒ»æ˜‡è¯éç¨‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**

---

## ğŸŒ ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦

### ç§‘å­¦çš„èƒŒæ™¯

ç«æ˜Ÿã®è¡›æ˜Ÿãƒ•ã‚©ãƒœã‚¹ãƒ»ãƒ€ã‚¤ãƒ¢ã‚¹ã®èµ·æºã¯ã€å·¨å¤§è¡çªã«ã‚ˆã‚‹ç«æ˜Ÿå‘¨å›å††ç›¤ã‹ã‚‰å½¢æˆã•ã‚ŒãŸã¨ã™ã‚‹èª¬ãŒæœ‰åŠ›ã§ã™ï¼ˆRosenblatt 2011, Canup & Salmon 2018ï¼‰ã€‚æœ¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒ­ãƒƒã‚·ãƒ¥é™ç•Œï¼ˆ~2.4 ç«æ˜ŸåŠå¾„ï¼‰å†…ã«å½¢æˆã•ã‚ŒãŸé«˜æ¸©ãƒ»é«˜å¯†åº¦ãƒ€ã‚¹ãƒˆå††ç›¤ã®æ™‚é–“é€²åŒ–ã‚’è¿½è·¡ã—ã¾ã™ã€‚

**3ã¤ã®ä¸»è¦éç¨‹ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–:**

1. **è¡çªã‚«ã‚¹ã‚±ãƒ¼ãƒ‰** â€” ç²’å­åŒå£«ã®è¡çªã«ã‚ˆã‚‹ç ´ç •ãƒ»å†åˆ†å¸ƒ
2. **æ”¾å°„åœ§ blow-out** â€” ç«æ˜Ÿã‹ã‚‰ã®èµ¤å¤–æ”¾å°„ã«ã‚ˆã‚‹å°ç²’å­ã®å¹ãé£›ã°ã—
3. **æ˜‡è¯** â€” é«˜æ¸©ç’°å¢ƒã§ã®ç²’å­è’¸ç™º

### ä¸»ãªå‡ºåŠ›

- 2å¹´é–“ã®è³ªé‡æå¤±å±¥æ­´ $\dot{M}_{\rm out}(t)$ ã¨ç´¯ç©è³ªé‡æå¤± $M_{\rm loss}$
- ç²’å¾„åˆ†å¸ƒï¼ˆPSDï¼‰ã®æ™‚é–“ç™ºå±•
- blow-out å¢ƒç•Œã‚µã‚¤ã‚º $a_{\rm blow}$ ã®å‹•çš„å¤‰åŒ–

---

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

```text
ã©ã“ã‹ã‚‰èª­ã‚€ã¹ãï¼Ÿ

â”Œâ”€ åˆã‚ã¦ã®æ–¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   README.mdï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰                              â”‚
â”‚       â†“                                               â”‚
â”‚   analysis/config_guide.md â”€â”€â†’ è¨­å®šã®æ›¸ãæ–¹             â”‚
â”‚   ï¼ˆğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰é–‹å§‹ï¼‰                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¨­å®šã‚’è©³ã—ãçŸ¥ã‚ŠãŸã„                                     â”‚
â”‚   analysis/config_guide.md â”€â”€â†’ å…¨è¨­å®šã‚­ãƒ¼ã®è§£èª¬         â”‚
â”‚   ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³3ä»¥é™ï¼‰                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç‰©ç†å¼ã‚’ç¢ºèªã—ãŸã„                                       â”‚
â”‚   analysis/equations.md â”€â”€â†’ å¼ã®ä¸€å…ƒç®¡ç†                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®Ÿè¡Œæ‰‹é †ãƒ»ãƒ¬ã‚·ãƒ”                                         â”‚
â”‚   analysis/run-recipes.md â”€â”€â†’ ãƒ¢ãƒ¼ãƒ‰åˆ¥æ‰‹é †              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ»å†…éƒ¨æ§‹é€                                  â”‚
â”‚   analysis/overview.md â”€â”€â†’ é–‹ç™ºè€…å‘ã‘è©³ç´°               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å¯¾è±¡èª­è€… | å†…å®¹ |
|-------------|---------|------|
| `README.md` | å…¨å“¡ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ãƒ»ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ |
| `analysis/config_guide.md` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãæ–¹ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| `analysis/equations.md` | ç ”ç©¶è€… | ç‰©ç†å¼ã®å®šç¾©ï¼ˆå”¯ä¸€ã®ã‚½ãƒ¼ã‚¹ï¼‰ |
| `analysis/run-recipes.md` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | å®Ÿè¡Œãƒ¬ã‚·ãƒ”ãƒ»æ„Ÿåº¦è§£ææ‰‹é † |
| `analysis/overview.md` | é–‹ç™ºè€… | ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ |
| `analysis/literature_map.md` | ç ”ç©¶è€… | æ–‡çŒ®ç´¢å¼•ãƒ»å…ˆè¡Œç ”ç©¶ã¨ã®å¯¾å¿œ |

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä»®æƒ³ç’°å¢ƒï¼ˆæ¨å¥¨ï¼‰
python -m venv .venv && source .venv/bin/activate

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
pip install -r requirements.txt
```

### 2. æœ€åˆã®å®Ÿè¡Œ

```bash
# æ¨™æº–ã‚·ãƒŠãƒªã‚ªï¼ˆgas-poorã€è¡çªï¼‹blow-outï¼‹æ˜‡è¯ï¼‰
python -m marsdisk.run --config configs/scenarios/fiducial.yml
```

### 3. çµæœç¢ºèª

```bash
ls out/fiducial/
# series/run.parquet  - æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿
# summary.json        - é›†è¨ˆçµæœï¼ˆM_loss ãªã©ï¼‰
# checks/             - è³ªé‡ä¿å­˜æ¤œè¨¼ãƒ­ã‚°
```

> ğŸ’¡ **è©³ç´°ãªã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ**: `analysis/config_guide.md` ã®ã€ŒğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§

---

## ğŸ“– åŸºæœ¬çš„ãªä½¿ã„æ–¹

> **For AI Agents**: å¿…ãš [`analysis/AI_USAGE.md`](analysis/AI_USAGE.md) ã‚’èª­ã‚“ã§ã‹ã‚‰ä½œæ¥­ã—ã¦ãã ã•ã„ã€‚

### å‰æã¨ãƒ«ãƒ¼ãƒ«

- è§£æå¯¾è±¡ã¯ **gas-poor** ã®ç«æ˜Ÿãƒ­ãƒƒã‚·ãƒ¥å†…ãƒ€ã‚¹ãƒˆå††ç›¤
- Takeuchi & Lin (2003) ã¯æ—¢å®šã§ç„¡åŠ¹ï¼ˆ`ALLOW_TL2003=false`ï¼‰
- CLI ãƒ‰ãƒ©ã‚¤ãƒã¯ `python -m marsdisk.run --config <yaml>`
- âŸ¨Q_prâŸ© ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¿…é ˆï¼ˆä¾‹: `data/qpr_table.csv`ï¼‰

---

## ğŸ›ï¸ ã‚·ãƒŠãƒªã‚ªåˆ¥ã‚³ãƒãƒ³ãƒ‰ä¾‹

| ã‚·ãƒŠãƒªã‚ª | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |
| --- | --- |
| ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ï¼ˆæ˜‡è¯OFFï¼‰ | `python -m marsdisk.run --config configs/base.yml` |
| æ˜‡è¯ ON | `python -m marsdisk.run --config configs/base_sublimation.yml` |
| æ¨™æº–ã‚·ãƒŠãƒªã‚ª | `python -m marsdisk.run --config configs/scenarios/fiducial.yml` |
| é«˜æ¸©ã‚·ãƒŠãƒªã‚ª | `python -m marsdisk.run --config configs/scenarios/high_temp.yml` |

> ğŸ’¡ è¨­å®šã®ä¸Šæ›¸ã: `--override radiation.TM_K=5000`

---

## ğŸ“Š å‡ºåŠ›ãƒã‚§ãƒƒã‚¯

| å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ« | ç¢ºèªé …ç›® |
|-------------|---------|
| `series/run.parquet` | `M_out_dot`, `mass_lost_by_blowout`, `mass_lost_by_sinks` |
| `summary.json` | `case_status`, `mass_budget_max_error_percent`ï¼ˆâ‰¤0.5%ï¼‰ |
| `checks/mass_budget.csv` | è³ªé‡åæ”¯ã®æ¤œè¨¼ãƒ­ã‚° |

---

## ğŸ“– ã•ã‚‰ã«è©³ã—ã

| ç›®çš„ | å‚ç…§å…ˆ |
|------|--------|
| è¨­å®šã‚­ãƒ¼ã®è©³ç´°è§£èª¬ | `analysis/config_guide.md` |
| ãƒ¢ãƒ¼ãƒ‰åˆ¥ã®è©³ç´°æ‰‹é † | `analysis/run-recipes.md` |
| æ•°å¼ãƒ»ç‰©ç† | `analysis/equations.md` |
| ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | `analysis/overview.md` |
| æ–‡çŒ®ç´¢å¼• | `analysis/literature_map.md` |

---

## ğŸ›ï¸ ç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§ï¼ˆæ¦‚è¦ï¼‰

ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§æŒ‡å®šå¯èƒ½ãªä¸»è¦ç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¦‚è¦ã§ã™ã€‚è©³ç´°ã¯ `analysis/config_guide.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### æ”¾å°„ãƒ»æ¸©åº¦é–¢é€£ (`radiation`)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | å…¸å‹å€¤ |
|-----------|------|--------|
| `radiation.TM_K` | ç«æ˜Ÿè¡¨é¢æ¸©åº¦ [K] | 4000 |
| `radiation.source` | æ”¾å°„æºï¼ˆ`"mars"` / `"off"`ï¼‰ | `"mars"` |
| `radiation.qpr_table_path` | âŸ¨Q_prâŸ©ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‘ã‚¹ | `"data/qpr_table.csv"` |

### æ™‚å¤‰æ¸©åº¦ãƒ‰ãƒ©ã‚¤ãƒ (`radiation.mars_temperature_driver`)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | å…¸å‹å€¤ |
|-----------|------|--------|
| `.enabled` | æ™‚å¤‰æ¸©åº¦ãƒ‰ãƒ©ã‚¤ãƒã®æœ‰åŠ¹åŒ– | `true` |
| `.mode` | `"constant"` / `"table"` | `"table"` |
| `.table.path` | æ¸©åº¦ãƒ†ãƒ¼ãƒ–ãƒ«CSVã®ãƒ‘ã‚¹ | `"data/mars_temperature_T4000p0K.csv"` |

### æ˜‡è¯é–¢é€£ (`sinks`)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | å…¸å‹å€¤ |
|-----------|------|--------|
| `sinks.mode` | ã‚·ãƒ³ã‚¯æœ‰åŠ¹åŒ–ï¼ˆ`"none"` / `"sublimation"`ï¼‰ | `"sublimation"` |
| `sinks.sub_params.mode` | æ˜‡è¯ãƒ¢ãƒ‡ãƒ«ï¼ˆ`"logistic"` / `"hkl"`ï¼‰ | `"hkl"` |
| `sinks.sub_params.alpha_evap` | è’¸ç™ºä¿‚æ•° | 0.007 |
| `sinks.sub_params.mu` | åˆ†å­é‡ [kg/mol] | 0.044 |
| `sinks.sub_params.A` / `.B` | Clausius-Clapeyronä¿‚æ•° | 13.613 / 17850 |

### å††ç›¤ã‚¸ã‚ªãƒ¡ãƒˆãƒª (`disk.geometry`)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | å…¸å‹å€¤ |
|-----------|------|--------|
| `r_in_RM` | å†…ç¸åŠå¾„ [MarsåŠå¾„] | 2.2 |
| `r_out_RM` | å¤–ç¸åŠå¾„ [MarsåŠå¾„] | 2.7 |

### ãã®ä»–ã®ä¸»è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

| ã‚«ãƒ†ã‚´ãƒª | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ | å…¸å‹å€¤ |
|---------|-----------|------|--------|
| ç‰©è³ª | `material.rho` | ãƒãƒ«ã‚¯å¯†åº¦ [kg/mÂ³] | 3000 |
| ã‚µã‚¤ã‚º | `sizes.s_min` / `s_max` | ç²’å¾„ç¯„å›² [m] | 1e-6 / 3.0 |
| ã‚µã‚¤ã‚º | `sizes.n_bins` | å¯¾æ•°ãƒ“ãƒ³æ•° | 40 |
| PSD | `psd.alpha` | ã¹ãæŒ‡æ•° | 1.83 |
| åŠ›å­¦ | `dynamics.e0` / `i0` | é›¢å¿ƒç‡ãƒ»å‚¾æ–œè§’ | 0.5 / 0.05 |
| æ•°å€¤ | `numerics.t_end_years` | ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æœŸé–“ [yr] | 2.0 |

> ğŸ“– **å®Œå…¨ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§**: [`analysis/config_guide.md`](analysis/config_guide.md) ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³3ä»¥é™ã‚’å‚ç…§

---

## ğŸ“œ å‚è€ƒæ–‡çŒ®

- Hyodo et al. (2017, 2018): gas-poor ä»®å®šã®æ ¹æ‹ 
- Canup & Salmon (2018): è¡›æ˜Ÿå½¢æˆã‚·ãƒŠãƒªã‚ª
- Leinhardt & Stewart (2012): ç ´ç •å¼·åº¦ãƒ¢ãƒ‡ãƒ«
- Strubbe & Chiang (2006): æ”¾å°„åœ§æ”¯é…ã®æåƒ
