# 標準ケース: gas-poor, 衝突支配円盤
#
# 物理的前提:
#   - ガス希薄（Hyodo et al. 2017; 2018）
#   - 自己重力ウェイクによる速度分散増幅
#   - 昇華は有効、ガス抗力は無効
#
# 用途: 基本的なパラメータスタディのベースライン

_scenario:
  name: fiducial
  description: Gas-poor, collision-dominated disk (baseline)
  assumptions:
  - Gas-poor environment (Hyodo et al. 2017)
  - Self-gravity wake amplification enabled
  - Sublimation active, gas drag disabled

# ===========================================================================
# 物理モード（統一フィールド）
# ===========================================================================
# "full" | "collisions_only" | "sublimation_only" | "passive"
physics_mode: full

# ===========================================================================
# 空間・物質
# ===========================================================================
geometry:
  mode: 0D

material:
  rho: 3270.0  # kg/m³, 岩石質

# --- 温度設定（radiation.TM_K に統一）---
radiation:
  TM_K: 4000  # K, 火星赤外温度
  qpr_table_path: data/qpr_planck_forsterite_mie.csv

# --- サイズビン ---
sizes:
  s_min: 1.0e-7  # m
  s_max: 3.0     # m
  n_bins: 40

# --- 初期条件 ---
initial:
  mass_total: 1.0e-5
  s0_mode: upper

# --- 速度分散 ---
dynamics:
  e0: 0.5
  i0: 0.05
  t_damp_orbits: 20
  f_wake: 2.0  # 自己重力ウェイク有効

# --- 粒径分布 ---
psd:
  alpha: 1.83  # Dohnanyi平衡
  wavy_strength: 0.2

# --- 破砕強度 ---
qstar:
  Qs: 3.5e7
  a_s: 0.38
  B: 0.3
  b_g: 1.36
  v_ref_kms: [1.0, 5.0]
  coeff_units: ba99_cgs

# ===========================================================================
# 円盤幾何（統一フィールド: disk.geometry）
# ===========================================================================
  override_coeffs: true
  coeff_scale: 5.574
  coeff_table:
    1.0:
    - 195090000.0
    - 0.38
    - 0.8187652527440811
    - 1.36
    2.0:
    - 195090000.0
    - 0.38
    - 1.28478039442684
    - 1.36
    3.0:
    - 195090000.0
    - 0.38
    - 1.6722
    - 1.36
    4.0:
    - 292635000.0
    - 0.38
    - 2.2296
    - 1.36
    5.0:
    - 390180000.0
    - 0.38
    - 2.787
    - 1.36
    6.0:
    - 390180000.0
    - 0.38
    - 3.137652034251613
    - 1.36
    7.0:
    - 390180000.0
    - 0.38
    - 3.4683282387928047
    - 1.36
disk:
  geometry:
    r_in_RM: 2.2
    r_out_RM: 2.7
    r_profile: uniform
    p_index: 0.0

inner_disk_mass:
  use_Mmars_ratio: true
  M_in_ratio: 3.0e-5
  map_to_sigma: analytic

# ===========================================================================
# 表層モデル
# ===========================================================================
surface:
  init_policy: none
  sigma_surf_init_override:
  use_tcoll: true

# ===========================================================================
# シンク設定（gas-poor標準）
# ===========================================================================
# 使用するモードのパラメータのみ指定
sinks:
  mode: sublimation
  enable_sublimation: true
  T_sub: 1300.0
  # logistic モード用パラメータ（hkl は使用しないので省略可）
  sub_params:
    mode: hkl
    alpha_evap: 0.1
    dT: 50.0
    psat_model: clausius
    mu: 0.140694
    A: 13.809441833
    B: 28362.904024
    valid_K:
    - 1673.0
    - 2133.0
    enable_liquid_branch: true
    psat_liquid_switch_K: 2163.0
    A_liq: 11.08
    B_liq: 22409.0
    valid_liquid_K:
    - 2163.0
    - 3690.0
  enable_gas_drag: false  # gas-poor
  rho_g: 0.0

# ===========================================================================
# 供給（使用するモードのみ）
# ===========================================================================
supply:
  mode: const
  const:
    prod_area_rate_kg_m2_s: 0.0

# --- 自遮蔽 ---
    mu_orbit10pct: 1.0
    orbit_fraction_at_mu1: 0.05
  mixing:
    epsilon_mix: 1.0
  feedback:
    enabled: false
  reservoir:
    enabled: false
  temperature:
    enabled: false
  transport:
    mode: direct
shielding:

# ===========================================================================
# 相状態
# ===========================================================================
  mode: off
phase:
  enabled: true
  source: threshold    # "threshold" | "map"
  thresholds:
    T_condense_K: 2162.0
    T_vaporize_K: 2163.0

# ===========================================================================
# 数値パラメータ
# ===========================================================================
numerics:
  t_end_years: 2.0
  dt_init: 2.0
  safety: 0.08
  atol: 1e-10
  rtol: 1e-6

# ===========================================================================
# 出力
# ===========================================================================
io:
  outdir: out/fiducial
init_tau1:
  enabled: false
  scale_to_tau1: false
optical_depth:
  tau0_target: 1.0
  tau_stop: 2.302585092994046
  tau_stop_tol: 1e-06
  tau_field: tau_los
